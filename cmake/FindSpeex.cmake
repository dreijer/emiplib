
find_path(SPEEX_INCLUDE_DIR speex/speex.h)

set(SPEEX_INCLUDE_DIRS ${SPEEX_INCLUDE_DIR})

if (UNIX)
	find_library(SPEEX_LIBRARY speex)
	if (SPEEX_LIBRARY)
		find_library(SPEEXDSP_LIBRARY speexdsp)
		if (SPEEXDSP_LIBRARY)
			set(SPEEX_LIBRARIES ${SPEEX_LIBRARY} ${SPEEXDSP_LIBRARY})
		else (SPEEXDSP_LIBRARY)
			set(SPEEX_LIBRARIES ${SPEEX_LIBRARY})
		endif (SPEEXDSP_LIBRARY)
	endif (SPEEX_LIBRARY)
else (UNIX)
	find_library(SPEEX_LIB_RELEASE speex)
	find_library(SPEEX_LIB_DEBUG speex_d)

	set(LOOKFORSPEEXDSP FALSE)
	if (SPEEX_LIB_RELEASE OR SPEEX_LIB_DEBUG)
		set(LOOKFORSPEEXDSP TRUE)
		set(SPEEX_LIBRARIES "")
		if (NOT SPEEX_LIB_RELEASE OR NOT SPEEX_LIB_DEBUG)
			if (SPEEX_LIB_RELEASE)
				set(SPEEX_LIBRARIES ${SPEEX_LIB_RELEASE})
			else ()
				set(SPEEX_LIBRARIES ${SPEEX_LIB_DEBUG})
			endif()
		else ()
			set(SPEEX_LIBRARIES optimized ${SPEEX_LIB_RELEASE} debug ${SPEEX_LIB_DEBUG})
		endif()
	endif (SPEEX_LIB_RELEASE OR SPEEX_LIB_DEBUG)

	if (LOOKFORSPEEXDSP)
		find_library(SPEEXDSP_LIB_RELEASE speexdsp)
		find_library(SPEEXDSP_LIB_DEBUG speexdsp_d)
		if (SPEEXDSP_LIB_RELEASE OR SPEEXDSP_LIB_DEBUG)
			if (NOT SPEEXDSP_LIB_RELEASE OR NOT SPEEXDSP_LIB_DEBUG)
				if (SPEEXDSP_LIB_RELEASE)
					set(SPEEX_LIBRARIES ${SPEEX_LIBRARIES} ${SPEEX_LIB_RELEASE})
				else ()
					set(SPEEX_LIBRARIES ${SPEEX_LIBRARIES} ${SPEEX_LIB_DEBUG})
				endif()
			else ()
				set(SPEEX_LIBRARIES ${SPEEX_LIBRARIES} optimized ${SPEEXDSP_LIB_RELEASE} debug ${SPEEXDSP_LIB_DEBUG})
			endif()
		endif (SPEEXDSP_LIB_RELEASE OR SPEEXDSP_LIB_DEBUG)

	endif()
endif(UNIX)

include(FindPackageHandleStandardArgs)

find_package_handle_standard_args(SPEEX DEFAULT_MSG SPEEX_INCLUDE_DIRS SPEEX_LIBRARIES)

